# 如何给页面添加 css 样式

网页定义在`/src/svelteAdapter`目录，里面有很多`*.svelte`文件，这些文件中定义了页面的 html 元素。

`*.svelte`文件的基本结构是有一个`<script><script/>`代码块，只能有一个`<style><style/>`代码块。script 代码块写有本页面的逻辑，也`import`进来了项目中的其他文件。
剩下的都是 html 元素，样式代码块中的样式只对本页面中的 html 元素生效，所以我们可以使用相对简单的 css 选择器，而不必担心重叠和互相影响的问题。

## 要求

- 设计夜间模式和白天模式
- 在手机屏幕上显示良好
- 每一个`*.svelte`都要添加样式。

## 我们在上述 style 代码块中添加 CSS 样式即可。

如果我们要在页面之间共享 css 样式，建立`/src/svelteAdapter/css/`，将共用的 css 放在此处，
然后在`<script><script/>`中加入`import "./css/<css文件名>";`。

## 要想实时的看到我们设计的样式。

### 最简单的方法

把`*.svelte`文件的内容粘贴到[svelte REPL](https://svelte.dev/repl/)中去，然后在页面的`<style><style/>`代码块中添加样式。这样复制之后可能会用

### 较麻烦的方法是

在本机上安装依赖，修改`App.svelte`使它只显示我们正在添加样式的那一个页面。

# 项目的基本逻辑和文件结构

笔者按：本项目的结构设计意图模仿 clean architecture，但是编码实现之前没有详细的设计，有一些互相不一致的地方。现在笔者感觉不太满意，因为有很多方法的函数体只有一行，纯粹就是为了传递一次调用。这导致开发者搞不清楚某个函数到底有什么用，要追踪多次函数调用才能找到实际做事的代码。之前笔者实现一个较简单的原型是使用订阅/发布模型建立的，其中各实体通过发布事件、监听事件来耦合。目前，笔者认为本项目也可以回到订阅/发布模型的结构上去，亟待小组讨论商榷。

`/src/svelteAdapter`中是视图层，它们会调用`/src/useCase`中的类定义的方法。

## `/src/domain`中是游戏相关数据结构和过程的代码。

主要内容在`KingzGame`中。

## `/src/useCase`

这里面写了所有的业务逻辑

- `GameLifeCycle`里面写了游戏开始、结束、掉线、每个回合结束时应该调用的函数，写了这些事情发生时要做的事情。
- `PlayerAgent`里面提供`on_sumbit_command`给`LocalPlayer`和`RemotePlayer`来改变游戏的状态。
- `LocalPlayer` 和 `RemotePlayer`，前者负责把本地玩家注册到云端，并负责账户的网名、登陆、退出的基本操作。后者储存游戏远端玩家的网名，调用`on_submit_command`来更新本地棋局。

## `/src/port`

这里面是把游戏状态导出或者导入外部系统的功能

### `/src/port/SveltePort`

这里面包含更新棋盘方块的函数，是由上述`/src/useCase`中的代码来调用的。

# 名词解释

## 本地玩家和远端玩家 `LocalPlayer` `RemotePlayer`

对一个客户端来说，本地玩家就是用键盘鼠标等直接输入指令改变棋盘状态的玩家。远端玩家就是由客户端程序代表的一个玩家，他可以是运行在客户端上的电脑，也可以是经过云端中继的在另一个客户端上游玩的玩家。

## svelte

组件化前端框架。使用哪一个框架并不重要，其他流行框架还有 React，Vue，Angular 等。
